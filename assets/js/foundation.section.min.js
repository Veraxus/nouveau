(function(e,t,n,r){"use strict";Foundation.libs.section={name:"section",version:"4.0.8",settings:{deep_linking:!1,one_up:!0,callback:function(){}},init:function(e,t,n){var r=this;this.scope=e||this.scope;Foundation.inherit(this,"throttle data_options");if(typeof t!="string"){this.set_active_from_hash();this.events();return!0}return this[t].call(this,n)},events:function(){var r=this;e(this.scope).on("click.fndtn.section","[data-section] .title",function(t){var n=e(this),i=n.closest("[data-section]");r.toggle_active.call(this,t,r)});e(t).on("resize.fndtn.section",r.throttle(function(){r.resize.call(this)},30)).on("hashchange",function(){if(!r.settings.toggled){r.set_active_from_hash();e(this).trigger("resize")}}).trigger("resize");e(n).on("click.fndtn.section",function(t){e(t.target).closest(".title").length<1&&e("[data-section].vertical-nav, [data-section].horizontal-nav").find("section, .section").removeClass("active").attr("style","")})},toggle_active:function(t,n){var r=e(this),i=r.closest("section, .section"),s=i.find(".content"),o=i.closest("[data-section]"),n=Foundation.libs.section,u=e.extend({},n.settings,n.data_options(o));n.settings.toggled=!0;!u.deep_linking&&s.length>0&&t.preventDefault();if(i.hasClass("active"))(n.small(o)||n.is_vertical(o)||n.is_horizontal(o)||n.is_accordion(o))&&i.removeClass("active").attr("style","");else{var a=null,f=n.outerHeight(i.find(".title"));if(n.small(o)||u.one_up){a=r.closest("[data-section]").find("section.active, .section.active");n.small(o)?a.attr("style",""):a.attr("style","visibility: hidden; padding-top: "+f+"px;")}n.small(o)?i.attr("style",""):i.css("padding-top",f);i.addClass("active");a!==null&&a.removeClass("active").attr("style","")}setTimeout(function(){n.settings.toggled=!1},300);u.callback()},resize:function(){var t=e("[data-section]"),n=Foundation.libs.section;t.each(function(){var t=e(this),r=t.find("section.active, .section.active"),i=e.extend({},n.settings,n.data_options(t));if(r.length>1)r.not(":first").removeClass("active").attr("style","");else if(r.length<1&&!n.is_vertical(t)&&!n.is_horizontal(t)&&!n.is_accordion(t)){var s=t.find("section, .section").first();s.addClass("active");n.small(t)?s.attr("style",""):s.css("padding-top",n.outerHeight(s.find(".title")))}n.small(t)?r.attr("style",""):r.css("padding-top",n.outerHeight(r.find(".title")));n.position_titles(t);n.is_horizontal(t)&&!n.small(t)?n.position_content(t):n.position_content(t,!1)})},is_vertical:function(e){return e.hasClass("vertical-nav")},is_horizontal:function(e){return e.hasClass("horizontal-nav")},is_accordion:function(e){return e.hasClass("accordion")},set_active_from_hash:function(){var n=t.location.hash.substring(1),r=e("[data-section]"),i=this;r.each(function(){var t=e(this),r=e.extend({},i.settings,i.data_options(t));if(n.length>0&&r.deep_linking){t.find("section, .section").attr("style","").removeClass("active");t.find('.content[data-slug="'+n+'"]').closest("section, .section").addClass("active")}})},position_titles:function(t,n){var r=t.find(".title"),i=0,s=this;typeof n=="boolean"?r.attr("style",""):r.each(function(){e(this).css("left",i);i+=s.outerWidth(e(this))})},position_content:function(t,n){var r=t.find(".title"),i=t.find(".content"),s=this;if(typeof n=="boolean"){i.attr("style","");t.attr("style","")}else{t.find("section, .section").each(function(){var t=e(this).find(".title"),n=e(this).find(".content");n.css({left:t.position().left-1,top:s.outerHeight(t)-2})});typeof Zepto=="function"?t.height(this.outerHeight(r.first())):t.height(this.outerHeight(r.first())-2)}},small:function(t){var n=e.extend({},this.settings,this.data_options(t));return t&&t.hasClass("tabs")?!1:t&&this.is_accordion(t)?!0:e("html").hasClass("lt-ie9")?!0:e("html").hasClass("ie8compat")?!0:e(this.scope).width()<768},off:function(){e(this.scope).off(".fndtn.section");e(t).off(".fndtn.section");e(n).off(".fndtn.section")}}})(Foundation.zj,this,this.document);